# テトリス究極版 要件定義書

## 1. プロジェクト概要

* **プロダクト名（仮）**: Tetris Infinity EX
* **目的**: 35年以上続くテトリス体験を“競技・観戦・協働”の3軸で再発明し、e‑sports世代とカジュアル層の両方を取り込む。
* **成功指標 (HS1)**: 90日定着率15%以上、月間アクティブユーザー100万、e‑sports大会同時視聴10万人。

## 2. ターゲットユーザー

| セグメント         | ニーズ             | 代表ペルソナ         |
| ------------- | --------------- | -------------- |
| コア競技勢 (15%)   | 高速入力・厳密ルール・ランク戦 | TETRIS GM ホルダー |
| ライト勢 (55%)    | いつでも遊べる・報酬サイクル  | 通勤中スマホゲーマー     |
| 観戦勢 (20%)     | 戦略・実況・スキン収集     | Twitch 視聴者     |
| 障がいユーザー (10%) | アクセシブルUI・色覚対応   | 片手プレイヤー        |

## 3. プラットフォーム

* **必須**: Web (PC ブラウザ) / Steam (PC ネイティブ)
* **推奨**: なし
* クロスプログレッション (Steam-Web) を標準実装。

## 4. 基本ゲームプレイ

* 公式 Tetris Guideline に準拠 (SRS, 7‑Bag RNG, Hold, Ghost Piece)。
* 入力遅延: 100 fps 時 7ms 以下。
* 可変 DAS / ARR をユーザー設定可能。

## 5. 拡張ゲームモード

| モード              | 概要          | プレイ人数 | KPI        |
| ---------------- | ----------- | ----- | ---------- |
| Marathon         | 150ライン/∞ライン | 1人    | 完走率40%     |
| Blitz (2分)       | スコアアタック     | 1人    | スコア中央値60万  |
| Battle Royale 99 | 99人落ち残り     | 1‑99人 | Avg.試合時間6分 |
| Duo Co‑op        | 2人共同で1フィールド | 2人    | クリア率55%    |
| Puzzle Maker     | ユーザー生成      | 1人    | 週間投稿500件   |

## 6. オンライン機能

* リージョン別低遅延マッチメイキング (<70 ms RTT)。
* Elo + TrueSkill ハイブリッドのランク。
* リプレイ共有・クラウド保存 (30日保持, Favoriteは無期限)。
* Spectator API (OBS プラグイン向け WebSocket)。

## 7. Live Ops

* シーズン制 (90日) でバトルパス & 限定スキン。
* 週次トーナメント & 月次公式大会。賞金は NFT 等を排除し現金/ゲーム内通貨。
* ゲーム内ニュースと Discord/LINE 連携告知。

## 8. マネタイズ

* **F2P ベース** + COSMETIC 課金 (スキン・エフェクト・BGM)。
* Battle Pass (ティア100) ＋ 広告視聴で無料ティア解放。
* 無課金でも全ルール・機能解放を保証。

## 9. UX/UI

* 片手操作モード (モバイル)
* フォントサイズ・コントラスト調整
* 色覚多様性：4タイプカラーブラインド対応 + シンプルスキン
* 120 Hz UI アニメーション、モーション削減トグル

## 10. グラフィック & サウンド

* スキンはシェーダーベースで 2D/3D レイヤ切替可。
* ローファイ / サイバーパンク / クラシック の3系統BGMをデフォルト搭載。
* サウンドレイテンシ補正オプション (±30 ms)。

## 11. アクセシビリティ

* フルキーボード & ワンボタンプレイ対応 (自動左右回転選択アルゴリズム)。
* 音声読み上げ (進行状況・残りライン)。
* カスタムコントローラ API (e.g., QuadStick)。

## 12. テクニカルアーキテクチャ

* **クライアント**: Unity LTS / WebGL transpile
* **サーバ**: Go + gRPC マイクロサービス、Redis Streams イベントバス
* **マッチメイキング**: Agones + OpenMatch on GKE
* **DB**: CockroachDB (ユーザーデータ), ClickHouse (テレメトリ)
* **CI/CD**: GitHub Actions -> Kubernetes, 毎日 E2E テスト10,000ジョブ

## 13. セキュリティ & フェアプレイ

* authoritative server + client リプレイ検証
* チート検出 ML モデル (不自然な GET DAS/ARR パターン)
* オンライン大会はハードウェア認証トークン必須 (YubiKey)

## 14. パフォーマンス要件

* 起動時間: Web版 (PC) 3 秒以内 (初回キャッシュ後)
* メモリ: PC ブラウザ <1 GB
*

## 15. 分析 & KPI

* レベル別離脱率, セッション長, ARPDAU, 同接などを DataDog + Tableau で可視化
* A/B testing framework 組込み (Remote Config)

## 16. QA & テスト

* 100% 基本機能自動テスト (Playwright + Unity TestRunner)
* デバイスラボ: 30 機種実機
* アクセシビリティ手動検証月次

## 17. ローカライゼーション

* i18n: 15言語 (日・英・中・韓・独・仏・西・葡・露・伊・タイ・越・印・タミル・アラビア語)
* 右‑左言語 (アラビア語・ヘブライ語) 対応 UI Flipping

## 18. 法務 & ライセンス

* Tetris® Holding との公式ライセンス締結 (契約リードタイム 6ヶ月 見込)
* 各国年齢レーティング: CERO A / ESRB E / PEGI 3
* GDPR・COPPA 準拠 (13歳未満は保護者同意)

## 19. リリース & ロードマップ

| フェーズ           | 期間  | マイルストーン                       |
| -------------- | --- | ----------------------------- |
| Pre‑Production | 3ヶ月 | ライセンス交渉・プロトタイプ                |
| Alpha          | 4ヶ月 | 基本プレイ & Online MVP            |
| Beta           | 3ヶ月 | クロスプレイ・ランク戦                   |
| Global Launch  | 1ヶ月 | マルチプラットフォーム同時リリース             |
| Year 1         | –   | 4シーズン + AR Spectator + MR モード |

## 20. 将来拡張

* AI コーチング (リプレイ解析 × LLM)
* 音楽同期モード (Beat‑tris) – BPM 連動ブロック速度
* UGC マーケット (コミュニティスキン売買)

---

### 付録 A: 最低動作スペック

* **モバイル**: iOS 14 / Android 10, A13 / Snapdragon 845
* **PC**: Intel i3‑6100, 4 GB RAM, Intel HD 530
* **コンソール**: Switch 2017 Launch Model

### 付録 B: KPI ダッシュボード項目

* DAU/MAU, Retention D1 D7 D30, ARPU, ARPPU, Match Duration, Crash‑Free Rate, Ping Distribution
